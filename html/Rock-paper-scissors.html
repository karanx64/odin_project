<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JavaScript Page 1</title>
    <style>
      button {
        margin: 10px;
      }
      ul > li {
        margin-left: -60px;
      }
      #GameResultDisplay > p {
        margin-left: -20px;
      }
    </style>
  </head>
  <body>
    <center><h1>JavaScript Page 1</h1></center>
    <center><h2>Console based Rock paper scissors</h2></center>
    <center>
      <h3>
        <mark>
          I bet, my code is the messiest and the least optimized of all.</mark
        >
      </h3>
    </center>
    <center>
      <div id="mainContainer"></div>
      <div id="scoreContainer">
        <ul style="list-style: none"></ul>
      </div>
      <div id="GameResultDisplay">
        <p></p>
      </div>
    </center>
    <script>
      // getComputerChoice() returns either rock, P or scissors based on Math.random()
      function getComputerChoice() {
        let num = Math.floor(Math.random() * 3);
        if (num === 0) {
          console.log("Opponent chose Rock");
          return "r";
        } else if (num === 1) {
          console.log("Opponent chose Paper");
          return "p";
        } else if (num === 2) {
          console.log("Opponent chose Scissors");
          return "s";
        }
      }

      let humanScore = 0;
      let computerScore = 0;

      const mainContainer = document.querySelector("#mainContainer");
      const scoreContainer = document.querySelector("#scoreContainer");
      const myList = document.querySelector("#scoreContainer>ul");

      const btnRock = document.createElement("button");
      btnRock.textContent = "Rock";
      const btnPaper = document.createElement("button");
      btnPaper.textContent = "Paper";
      const btnScissors = document.createElement("button");
      btnScissors.textContent = "Scissors";

      mainContainer.appendChild(btnRock);
      mainContainer.appendChild(btnPaper);
      mainContainer.appendChild(btnScissors);

      btnRock.addEventListener("click", (e) => {
        const myListItem = document.createElement("li");
        const roundRslt = playRound("r", getComputerChoice());
        myList.appendChild(myListItem);
        myListItem.textContent =
          "human: " +
          playRound().humanScore +
          " | computer: " +
          playRound().computerScore;
        gameResult(playRound().humanScore, playRound().computerScore);
      });
      btnPaper.addEventListener("click", (e) => {
        const myListItem = document.createElement("li");
        const roundRslt = playRound("p", getComputerChoice());
        myList.appendChild(myListItem);
        myListItem.textContent =
          "human: " +
          playRound().humanScore +
          " | computer: " +
          playRound().computerScore;
        gameResult(playRound().humanScore, playRound().computerScore);
      });
      btnScissors.addEventListener("click", (e) => {
        const myListItem = document.createElement("li");
        const roundRslt = playRound("s", getComputerChoice());
        myList.appendChild(myListItem);
        myListItem.textContent =
          "human: " +
          playRound().humanScore +
          " | computer: " +
          playRound().computerScore;
        gameResult(playRound().humanScore, playRound().computerScore);
      });

      // playround() evaluates both the inputs and returns who scored.
      function playRound(humanChoice, computerChoice) {
        if (computerChoice === "r" && humanChoice === "r") {
          return "d";
        } else if (computerChoice === "p" && humanChoice === "p") {
          return "d";
        } else if (computerChoice === "s" && humanChoice === "s") {
          return "d";
        } else if (computerChoice === "r" && humanChoice === "p") {
          humanScore += 1;
          return "hw";
        } else if (computerChoice === "p" && humanChoice === "r") {
          computerScore += 1;
          return "cw";
        } else if (computerChoice === "r" && humanChoice === "s") {
          computerScore += 1;
          return "cw";
        } else if (computerChoice === "s" && humanChoice === "r") {
          humanScore += 1;
          return "hw";
        } else if (computerChoice === "p" && humanChoice === "s") {
          humanScore += 1;
          return "hw";
        } else if (computerChoice === "s" && humanChoice === "p") {
          computerScore += 1;
          return "cw";
        }
        return { humanScore, computerScore };
      }
      function gameResult(humanScore, computerScore) {
        const GameResultDisplay = document.querySelector("div>p");

        if (humanScore == 5 && computerScore < 5) {
          btnRock.style.display = "none";
          btnPaper.style.display = "none";
          btnScissors.style.display = "none";
          GameResultDisplay.textContent = "game ends, Human wins";
        } else if (computerScore == 5 && humanScore < 5) {
          btnRock.style.display = "none";
          btnPaper.style.display = "none";
          btnScissors.style.display = "none";
          GameResultDisplay.textContent = "game ends, computer wins";
        }
      }
    </script>
  </body>
</html>
